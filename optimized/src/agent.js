(function(){var e=require("./g");module.exports=function(n,r,i,s,o,u){var a=this;a.id=n+"",a.x=r,a.y=i,a.dir=e.rnd(8),a.type="player",a.health=1,a.next={ready:!0,agents:!0,map:!0,types:!0},a.act=function(e){if(a.next.ready){var t={tps:e.tps,age:e.age,datetime:e.datetime,sunlight:e.sunlight,self:a};a.next.agents&&(t.agents=e.agents),a.next.map&&(t.width=e.width,t.height=e.height,t.map=e.map,a.next.map=!1),a.next.types&&(t.types=e.types,a.next.types=!1),a.next={ready:!1},s.send(JSON.stringify(t))}},s.on("message",function(e){var t=JSON.parse(e.utf8Data);u(t)}),s.on("close",function(e,t){console.log(new Date+" Disconnected."),o()})}})()